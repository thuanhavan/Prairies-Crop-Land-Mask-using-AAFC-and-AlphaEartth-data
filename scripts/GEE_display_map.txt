//======== DISPLAY CROPMASK ==========//
// 1. List your three “CropMask” folders
var folders = ['projects/cropmask-alphearth/assets/CropMask'];
// 2. Apply it to every folder, then make one union‐mosaic
var perFolder = folders.map(loadMosaicFromFolder);
var allMasks = ee.ImageCollection.fromImages(perFolder).mosaic().rename('b1');
// 3. Display
Map.addLayer(allMasks, {"opacity":1,"bands":["b1"],"min":0.4,"max":1,"palette":["ebff14","30a73d"]}, 'All CropMasks');


//======== DISPLAY CROPLAND BOUNDARY ==========//
var prairies = ee.FeatureCollection('projects/ee-realfieldca/assets/Prairies_ROI')
var styling = {color: 'red', fillColor: '00000000', width:2};
Map.addLayer(prairies.style(styling),{'opacity': 1}, 'field boundary')


//======== FUNCTIONS ==========//
// A small helper: list, load & mask every IMAGE in a folder, then mosaic
function loadMosaicFromFolder(folderId) {
  // get metadata for everything under the folder
  var assets = ee.data.listAssets(folderId).assets;
  // pull only the IMAGE IDs
  var imageIds = assets.filter(function(a){ return a.type === 'IMAGE'; }).map(function(a){ return a.id; });
  // load each one, mask out zeros, collect into a collection
  var col = ee.ImageCollection(imageIds.map(function(id) {
      var img = ee.Image(id);
      return img.updateMask(img.neq(0));
    })
  );
  // return the mosaic of that collection
  return col.mosaic()
}
